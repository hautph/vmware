<%- include('../partials/header.ejs', { title: t('resources.title') }) %>

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="page-header d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="mb-0"><i class="bi bi-cpu"></i> <%= t('resources.title') %></h1>
                    <p class="text-muted mb-0"><%= t('resources.description') %></p>
                </div>
                <div class="d-flex gap-2">
                    <button id="resetFormBtn" class="btn btn-outline-secondary">
                        <i class="bi bi-arrow-repeat"></i> Reset
                    </button>
                    <button type="submit" form="resourceForm" class="btn btn-primary">
                        <i class="bi bi-calculator"></i> <%= t('resources.calculate') %>
                    </button>
                </div>
            </div>
            
            <div class="alert alert-info alert-dismissible fade show" role="alert">
                <i class="bi bi-info-circle"></i>
                <strong>Tip:</strong> Select components and adjust specifications to calculate your VMware resource requirements.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            
            <form id="resourceForm" action="/resources/calculate" method="POST">
                <!-- Component Categories Accordion -->
                <div class="accordion" id="componentsAccordion">
                    <!-- Database Servers -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="databaseHeading">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#databaseCollapse" aria-expanded="true" aria-controls="databaseCollapse">
                                <i class="bi bi-database me-2 text-primary"></i>
                                <span><%= t('resources.database_servers') %></span>
                                <span class="badge bg-primary ms-2" id="databaseCount">0</span>
                            </button>
                        </h2>
                        <div id="databaseCollapse" class="accordion-collapse collapse show" aria-labelledby="databaseHeading" data-bs-parent="#componentsAccordion">
                            <div class="accordion-body">
                                <div class="row g-4">
                                    <!-- MySQL -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-primary text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[mysql][selected]" value="true" id="mysql">
                                                    <label class="form-check-label" for="mysql">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">MySQL</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="mysql_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="mysql_vms" name="components[mysql][vms]" min="1" value="1" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mysql_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="mysql_cpu" name="components[mysql][cpu]" min="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mysql_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="mysql_ram" name="components[mysql][ram]" min="1" step="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mysql_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="mysql_storage" name="components[mysql][storage]" min="10" value="200" disabled>
                                                </div>
                                                <div>
                                                    <label for="mysql_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="mysql_deployment" name="components[mysql][deployment]" data-component="mysql" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="master-slave">Master-Slave (semi-sync)</option>
                                                        <option value="cluster">3 nodes Galera (sync multi-master)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- PostgreSQL -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-primary text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[postgresql][selected]" value="true" id="postgresql">
                                                    <label class="form-check-label" for="postgresql">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">PostgreSQL</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="postgresql_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="postgresql_vms" name="components[postgresql][vms]" min="1" value="1" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="postgresql_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="postgresql_cpu" name="components[postgresql][cpu]" min="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="postgresql_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="postgresql_ram" name="components[postgresql][ram]" min="1" step="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="postgresql_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="postgresql_storage" name="components[postgresql][storage]" min="10" value="200" disabled>
                                                </div>
                                                <div>
                                                    <label for="postgresql_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="postgresql_deployment" name="components[postgresql][deployment]" data-component="postgresql" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="replication">Streaming (hot standby)</option>
                                                        <option value="patroni">Patroni (3 nodes, auto-failover)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Oracle Database -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-primary text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[oracle][selected]" value="true" id="oracle">
                                                    <label class="form-check-label" for="oracle">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Oracle Database</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="oracle_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="oracle_vms" name="components[oracle][vms]" min="1" value="1" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="oracle_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="oracle_cpu" name="components[oracle][cpu]" min="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="oracle_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="oracle_ram" name="components[oracle][ram]" min="1" step="1" value="16" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="oracle_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="oracle_storage" name="components[oracle][storage]" min="10" value="500" disabled>
                                                </div>
                                                <div>
                                                    <label for="oracle_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="oracle_deployment" name="components[oracle][deployment]" data-component="oracle" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="rac">Oracle RAC</option>
                                                        <option value="dataguard">Data Guard</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- MongoDB -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-primary text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[mongodb][selected]" value="true" id="mongodb">
                                                    <label class="form-check-label" for="mongodb">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">MongoDB</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="mongodb_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="mongodb_vms" name="components[mongodb][vms]" min="1" value="3" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mongodb_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="mongodb_cpu" name="components[mongodb][cpu]" min="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mongodb_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="mongodb_ram" name="components[mongodb][ram]" min="1" step="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="mongodb_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="mongodb_storage" name="components[mongodb][storage]" min="10" value="300" disabled>
                                                </div>
                                                <div>
                                                    <label for="mongodb_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="mongodb_deployment" name="components[mongodb][deployment]" data-component="mongodb" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="replica-set">Replica Set (3 nodes: 1 primary + 2 secondary)</option>
                                                        <option value="sharded-cluster">Sharded (3 shards, config server)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cache & NoSQL Servers -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="cacheHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#cacheCollapse" aria-expanded="false" aria-controls="cacheCollapse">
                                <i class="bi bi-stack me-2 text-success"></i>
                                <span><%= t('resources.cache_servers') %></span>
                                <span class="badge bg-success ms-2" id="cacheCount">0</span>
                            </button>
                        </h2>
                        <div id="cacheCollapse" class="accordion-collapse collapse" aria-labelledby="cacheHeading" data-bs-parent="#componentsAccordion">
                            <div class="accordion-body">
                                <div class="row g-4">
                                    <!-- Redis -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-success text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[redis][selected]" value="true" id="redis">
                                                    <label class="form-check-label" for="redis">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Redis</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="redis_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="redis_vms" name="components[redis][vms]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="redis_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="redis_cpu" name="components[redis][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="redis_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="redis_ram" name="components[redis][ram]" min="1" step="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="redis_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="redis_storage" name="components[redis][storage]" min="10" value="50" disabled>
                                                </div>
                                                <div>
                                                    <label for="redis_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="redis_deployment" name="components[redis][deployment]" data-component="redis" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="replication">Master-Slave (sentinel cho HA)</option>
                                                        <option value="redis-cluster">Redis Cluster (3+ masters, sharding, auto-rebalance)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Memcached -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-success text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[memcached][selected]" value="true" id="memcached">
                                                    <label class="form-check-label" for="memcached">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Memcached</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="memcached_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="memcached_vms" name="components[memcached][vms]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="memcached_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="memcached_cpu" name="components[memcached][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="memcached_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="memcached_ram" name="components[memcached][ram]" min="1" step="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="memcached_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="memcached_storage" name="components[memcached][storage]" min="10" value="20" disabled>
                                                </div>
                                                <div>
                                                    <label for="memcached_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="memcached_deployment" name="components[memcached][deployment]" data-component="memcached" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="cluster" selected>Cluster</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Cassandra -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-success text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[cassandra][selected]" value="true" id="cassandra">
                                                    <label class="form-check-label" for="cassandra">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Cassandra</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="cassandra_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="cassandra_vms" name="components[cassandra][vms]" min="1" value="3" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="cassandra_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="cassandra_cpu" name="components[cassandra][cpu]" min="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="cassandra_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="cassandra_ram" name="components[cassandra][ram]" min="1" step="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="cassandra_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="cassandra_storage" name="components[cassandra][storage]" min="10" value="500" disabled>
                                                </div>
                                                <div>
                                                    <label for="cassandra_deployment" class="form-label">Deployment</label>
                                                    <select class="form-select deployment-type" id="cassandra_deployment" name="components[cassandra][deployment]" data-component="cassandra" disabled>
                                                        <option value="standalone">Standalone</option>
                                                        <option value="replication">Multi-DC (RF=3)</option>
                                                        <option value="cluster">Ring (5-10 nodes, gossip protocol)</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Application & Web Servers -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="appHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#appCollapse" aria-expanded="false" aria-controls="appCollapse">
                                <i class="bi bi-app me-2 text-info"></i>
                                <span><%= t('resources.app_servers') %></span>
                                <span class="badge bg-info ms-2" id="appCount">0</span>
                            </button>
                        </h2>
                        <div id="appCollapse" class="accordion-collapse collapse" aria-labelledby="appHeading" data-bs-parent="#componentsAccordion">
                            <div class="accordion-body">
                                <div class="row g-4">
                                    <!-- Web Server -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-info text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[web][selected]" value="true" id="web">
                                                    <label class="form-check-label" for="web">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Web Server</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="web_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="web_vms" name="components[web][vms]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="web_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="web_cpu" name="components[web][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="web_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="web_ram" name="components[web][ram]" min="1" step="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="web_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="web_storage" name="components[web][storage]" min="10" value="50" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Application Server -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-info text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[app][selected]" value="true" id="app">
                                                    <label class="form-check-label" for="app">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Application Server</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="app_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="app_vms" name="components[app][vms]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="app_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="app_cpu" name="components[app][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="app_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="app_ram" name="components[app][ram]" min="1" step="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="app_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="app_storage" name="components[app][storage]" min="10" value="100" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Load Balancer -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-info text-white">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[loadbalancer][selected]" value="true" id="loadbalancer">
                                                    <label class="form-check-label" for="loadbalancer">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Load Balancer</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="loadbalancer_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="loadbalancer_vms" name="components[loadbalancer][vms]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="loadbalancer_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="loadbalancer_cpu" name="components[loadbalancer][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="loadbalancer_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="loadbalancer_ram" name="components[loadbalancer][ram]" min="1" step="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="loadbalancer_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="loadbalancer_storage" name="components[loadbalancer][storage]" min="10" value="20" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Desktop & High Performance -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="desktopHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#desktopCollapse" aria-expanded="false" aria-controls="desktopCollapse">
                                <i class="bi bi-person me-2 text-warning"></i>
                                <span><%= t('resources.desktop') %></span>
                                <span class="badge bg-warning ms-2" id="desktopCount">0</span>
                            </button>
                        </h2>
                        <div id="desktopCollapse" class="accordion-collapse collapse" aria-labelledby="desktopHeading" data-bs-parent="#componentsAccordion">
                            <div class="accordion-body">
                                <div class="row g-4">
                                    <!-- Desktop -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-warning text-dark">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[desktop][selected]" value="true" id="desktop">
                                                    <label class="form-check-label" for="desktop">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">Desktop</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="desktop_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="desktop_vms" name="components[desktop][vms]" min="1" value="1" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="desktop_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="desktop_cpu" name="components[desktop][cpu]" min="1" value="2" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="desktop_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="desktop_ram" name="components[desktop][ram]" min="1" step="1" value="4" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="desktop_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="desktop_storage" name="components[desktop][storage]" min="10" value="100" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- High Performance -->
                                    <div class="col-md-6 col-lg-4">
                                        <div class="card h-100 component-card">
                                            <div class="card-header bg-warning text-dark">
                                                <div class="form-check form-switch float-end">
                                                    <input class="form-check-input component-checkbox" type="checkbox" name="components[highperf][selected]" value="true" id="highperf">
                                                    <label class="form-check-label" for="highperf">Enable</label>
                                                </div>
                                                <h5 class="card-title mb-0">High Performance</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-3">
                                                    <label for="highperf_vms" class="form-label">VMs</label>
                                                    <input type="number" class="form-control vm-count" id="highperf_vms" name="components[highperf][vms]" min="1" value="1" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="highperf_cpu" class="form-label">CPU Cores</label>
                                                    <input type="number" class="form-control cpu-input" id="highperf_cpu" name="components[highperf][cpu]" min="1" value="8" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="highperf_ram" class="form-label">RAM (GB)</label>
                                                    <input type="number" class="form-control ram-input" id="highperf_ram" name="components[highperf][ram]" min="1" step="1" value="16" disabled>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="highperf_storage" class="form-label">Storage (GB)</label>
                                                    <input type="number" class="form-control storage-input" id="highperf_storage" name="components[highperf][storage]" min="10" value="500" disabled>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Hidden submit button for form submission -->
                <button type="submit" id="hiddenSubmit" class="d-none"></button>
            </form>
            
            <!-- Guidelines Section -->
            <div class="card mt-4">
                <div class="card-header">
                    <h3 class="mb-0"><i class="bi bi-info-circle"></i> <%= t('resources.component_guidelines') %></h3>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h5><i class="bi bi-database text-primary"></i> <%= t('resources.database_servers_guidelines') %></h5>
                            <ul>
                                <li><strong>MySQL:</strong> <%= t('resources.mysql_guideline') %></li>
                                <li><strong>PostgreSQL:</strong> <%= t('resources.postgresql_guideline') %></li>
                                <li><strong>Oracle:</strong> <%= t('resources.oracle_guideline') %></li>
                                <li><strong>MongoDB:</strong> <%= t('resources.mongodb_guideline') %></li>
                            </ul>
                            
                            <h5><i class="bi bi-stack text-success"></i> <%= t('resources.cache_nosql_guidelines') %></h5>
                            <ul>
                                <li><strong>Redis:</strong> <%= t('resources.redis_guideline') %></li>
                                <li><strong>Memcached:</strong> <%= t('resources.memcached_guideline') %></li>
                                <li><strong>Cassandra:</strong> <%= t('resources.cassandra_guideline') %></li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="bi bi-app text-info"></i> <%= t('resources.app_web_guidelines') %></h5>
                            <ul>
                                <li><strong>Web Server:</strong> <%= t('resources.web_server_guideline') %></li>
                                <li><strong>Application Server:</strong> <%= t('resources.app_server_guideline') %></li>
                                <li><strong>Load Balancer:</strong> <%= t('resources.load_balancer_guideline') %></li>
                            </ul>
                            
                            <h5><i class="bi bi-person text-warning"></i> <%= t('resources.desktop_highperf_guidelines') %></h5>
                            <ul>
                                <li><strong>Desktop:</strong> <%= t('resources.desktop_guideline') %></li>
                                <li><strong>High Performance:</strong> <%= t('resources.high_performance_guideline') %></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add event listeners to checkboxes to enable/disable inputs
    const checkboxes = document.querySelectorAll('.component-checkbox');
    const componentCounts = {
        'database': 0,
        'cache': 0,
        'app': 0,
        'desktop': 0
    };
    
    // Update component counts
    function updateComponentCounts() {
        componentCounts.database = document.querySelectorAll('#databaseCollapse .component-checkbox:checked').length;
        componentCounts.cache = document.querySelectorAll('#cacheCollapse .component-checkbox:checked').length;
        componentCounts.app = document.querySelectorAll('#appCollapse .component-checkbox:checked').length;
        componentCounts.desktop = document.querySelectorAll('#desktopCollapse .component-checkbox:checked').length;
        
        document.getElementById('databaseCount').textContent = componentCounts.database;
        document.getElementById('cacheCount').textContent = componentCounts.cache;
        document.getElementById('appCount').textContent = componentCounts.app;
        document.getElementById('desktopCount').textContent = componentCounts.desktop;
    }
    
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const card = this.closest('.component-card');
            const inputs = card.querySelectorAll('input[type="number"], select');
            
            inputs.forEach(input => {
                input.disabled = !this.checked;
            });
            
            // If component is selected, update defaults based on deployment type
            if (this.checked) {
                const deploymentSelect = card.querySelector('.deployment-type');
                if (deploymentSelect) {
                    updateComponentDefaults(deploymentSelect);
                }
            }
            
            // Update component counts
            updateComponentCounts();
            
            // Add visual feedback
            if (this.checked) {
                card.classList.add('border-primary');
            } else {
                card.classList.remove('border-primary');
            }
        });
    });
    
    // Add event listeners to deployment type selects
    const deploymentSelects = document.querySelectorAll('.deployment-type');
    
    deploymentSelects.forEach(select => {
        select.addEventListener('change', function() {
            updateComponentDefaults(this);
        });
    });
    
    // Reset form button
    document.getElementById('resetFormBtn').addEventListener('click', function() {
        if (confirm('Are you sure you want to reset all selections?')) {
            document.getElementById('resourceForm').reset();
            
            // Disable all inputs
            document.querySelectorAll('input[type="number"], select').forEach(input => {
                input.disabled = true;
            });
            
            // Remove visual feedback
            document.querySelectorAll('.component-card').forEach(card => {
                card.classList.remove('border-primary');
            });
            
            // Update component counts
            updateComponentCounts();
        }
    });
    
    // Function to update component defaults based on deployment type
    function updateComponentDefaults(select) {
        const component = select.getAttribute('data-component');
        const deploymentType = select.value;
        const card = select.closest('.component-card');
        
        // Get input fields
        const vmCountInput = card.querySelector('.vm-count');
        const cpuInput = card.querySelector('.cpu-input');
        const ramInput = card.querySelector('.ram-input');
        const storageInput = card.querySelector('.storage-input');
        
        // Update defaults based on component and deployment type
        switch(component) {
            case 'mysql':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                    case 'master-slave':
                        vmCountInput.value = 2;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                    case 'cluster':
                        vmCountInput.value = 3;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                }
                break;
                
            case 'postgresql':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                    case 'replication':
                        vmCountInput.value = 2;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                    case 'patroni':
                        vmCountInput.value = 3;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 200;
                        break;
                }
                break;
                
            case 'oracle':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 8;
                        ramInput.value = 16;
                        storageInput.value = 500;
                        break;
                    case 'rac':
                        vmCountInput.value = 2;
                        cpuInput.value = 8;
                        ramInput.value = 16;
                        storageInput.value = 500;
                        break;
                    case 'dataguard':
                        vmCountInput.value = 2;
                        cpuInput.value = 8;
                        ramInput.value = 16;
                        storageInput.value = 500;
                        break;
                }
                break;
                
            case 'mongodb':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 300;
                        break;
                    case 'replica-set':
                        vmCountInput.value = 3;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 300;
                        break;
                    case 'sharded-cluster':
                        vmCountInput.value = 5;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 300;
                        break;
                }
                break;
                
            case 'redis':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 2;
                        ramInput.value = 8;
                        storageInput.value = 50;
                        break;
                    case 'replication':
                        vmCountInput.value = 2;
                        cpuInput.value = 2;
                        ramInput.value = 8;
                        storageInput.value = 50;
                        break;
                    case 'redis-cluster':
                        vmCountInput.value = 3;
                        cpuInput.value = 2;
                        ramInput.value = 8;
                        storageInput.value = 50;
                        break;
                }
                break;
                
            case 'memcached':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 2;
                        ramInput.value = 4;
                        storageInput.value = 20;
                        break;
                    case 'cluster':
                        vmCountInput.value = 3;
                        cpuInput.value = 2;
                        ramInput.value = 4;
                        storageInput.value = 20;
                        break;
                }
                break;
                
            case 'cassandra':
                switch(deploymentType) {
                    case 'standalone':
                        vmCountInput.value = 1;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 500;
                        break;
                    case 'replication':
                        vmCountInput.value = 3;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 500;
                        break;
                    case 'cluster':
                        vmCountInput.value = 5;
                        cpuInput.value = 4;
                        ramInput.value = 8;
                        storageInput.value = 500;
                        break;
                }
                break;
        }
    }
    
    // Set initial focus to the first checkbox
    if (checkboxes.length > 0) {
        checkboxes[0].focus();
    }
});
</script>

<%- include('../partials/footer.ejs') %>